<!DOCTYPE html>
<html lang="he">
	<head>
		<meta charset="UTF-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0">
		<title>רפרנסים</title>
		<link rel="stylesheet" type="text/css" href="css\general.css"/>
		<link rel="stylesheet" type="text/css" href="css\references.css"/>
	</head>
	<body>
		<script type="module" src="navLogic.js"></script>
		<div id="table-containor">
			<table>
				<tr id="row-5" class="row-odd"></tr>
				<tr id="row-4" class="row-even"></tr>
				<tr id="row-3" class="row-odd"></tr>
				<tr id="row-2" class="row-even"></tr>
				<tr id="row-1" class="row-odd"></tr>
				<tr id="row-0" class="row-even"></tr>
			</table>
		</div>
		<script>
			const json_add = "https://yairmallah.github.io/pgmr/imgs/ref/ref_dict.json"
			fetch(json_add)
				.then(response => response.json())
				.then(data => {
					console.log(data);
					// Group images by line
					const rows = {};
					for (const key in data) {
						const item = data[key];
						const rowId = `row-${item.line}`;
						if (!rows[rowId]) rows[rowId] = [];
						rows[rowId].push(item);
					}
					console.log(rows);
					// Go over each row
					for (const rowId in rows) {
						const tr = document.getElementById(rowId);
						if (!tr) continue;

						// Sort by "row index"
						const sortedItems = rows[rowId].sort((a, b) => a["row index"] - b["row index"]);

						sortedItems.forEach(item => {
							const td = document.createElement('td');
							td.style.textAlign = item["row index"] < 0.5 ? 'left' : 'right';

							const img = document.createElement('img');
							img.src = item.url;
							img.alt = item.title;

							td.appendChild(img);
							tr.appendChild(td);
					});
					}
				})
				.catch(error => {
					console.error('Error loading JSON:', error);
				});
			
		</script>
	</body>
</html>
