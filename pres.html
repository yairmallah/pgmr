<!DOCTYPE html>
<html lang="he">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>פרזנטציה</title>
		<link rel="stylesheet" type="text/css" href="css\general.css"/>
		<link rel="stylesheet" type="text/css" href="css\pres.css"/>
        <script type="module">
			import { darkValues, toggleMode } from "https://yairmallah.github.io/pgmr/displayMode.js";
			Object.assign(darkValues[false],{
				"--mainBgColor": "hsla(50, 50%, 95%, 0.85)"
			});
			Object.assign(darkValues[true],{
				"--mainBgColor": "hsla(0, 0%, 0%, 0.85)"
			});
		</script>
		<script id="main-dict">
			// index => 0=addres, 1=func
			const phase_data = {
				0: ["references.html"],
				1: ["index.html"],
				2: ["video.html"],
				3: ["video.html"],
			}
		</script>
        <script type="module" src="https://yairmallah.github.io/pgmr/navLogic.js"></script>	
    </head>
    <body>
		<div id="thumbnails-container">
			<div id="buttons-container">
				<button class="phase-button" id="ph-0" onclick="update_phase(0)">
					<iframe class="btn-frm" id="frm-btn-0" src="references.html"></iframe>
					<p class="btn-txt" id="txt-btn-0">אדריכלות קלאסית ולואי קאהן</p>
				</button>
				<button class="phase-button" id="ph-1" onclick="update_phase(1)">
					<iframe class="btn-frm" id="frm-btn-1" src="index.html"></iframe>
					<p class="btn-txt" id="txt-btn-1">אדריכלות קלאסית ולואי קאהן</p>
				</button>
				<button class="phase-button" id="ph-2" onclick="update_phase(2)">
					<iframe class="btn-frm" id="frm-btn-2" src="video.html"></iframe>
					<p class="btn-txt" id="txt-btn-2">אדריכלות קלאסית ולואי קאהן</p>
				</button>
				<button class="phase-button" id="ph-3" onclick="update_phase(3)">
					<iframe class="btn-frm" id="frm-btn-3" src="references.html"></iframe>
					<p class="btn-txt" id="txt-btn-3">אדריכלות קלאסית ולואי קאהן</p>
				</button>
			</div>
		</div>
		<div id="main-section-container">
			<div id="main-texts">
					<p class="main-text" id="st-0">
						הפרדיגמה הקלאסית של האדריכלות נבנתה על יחסים בין חלל וחומר וסמל: המרחב הוא מערכת שבה לכל אלמנט יש תפקיד צורני ומבני. עם המהפכה התעשייתית השנייה והופעתה של המכונית, נוצר מצב חדש: מרחקים התארכו ומבנים הוגדרו לפי תפקודם. קנה המידה האדריכלי הומר למהירות ויעילות. בתוך המפנה הזה ניסח לואי קאהן את המובחנות בין מרחבים משרתים למשורתים. תפיסת "משרת-משורת" שלו ביקשה לסמן מחדש את סט היחסים האדריכליים.
					</p>
					<p class="main-text" id="st-1">
						בשנות החמישים הציע מדען המחשב ג'ון פון ניומן פרדיגמה ארכיטקטונית לבניית מחשב. הפרדיגמה מתבססת על ארבעה רכיבים המתקשרים ביניהם - משתמש, יחידת בקרה, יחידה לוגית ושרת. המשתמש שולח בקשה לשרת, הבקשה עוברת תרגום על ידי יחידת הבקרה, היחידה הלוגית מתווכת אותה לשרת ומחזירה ערך מתורגם למשתמש. ארכיטקטורת פון ניומן מבוססת על רשת מעברים בין מטא-פרוגרמות שונות.
					</p>
					<p class="main-text" id="st-2">
						בירושלים, הדרך למוזיאון ישראל אינה ישירה: כבישים, גשרים ושבילים יוצרים מערכת הכוונה וניתוב בתוך העיר. המרחק אינו מכשול אלא עיקרון-והגישה הופכת לניווט במערכת לוגית שמסוגלת לשמור, להסתיר ולכוון.
					</p>
					<p class="main-text" id="st-3">
						בגבעת רם יישמנו את עקרונות ארכיטקטורת פון ניומן על תכנון פיזי: חילקנו את הקמפוס לקטגוריות של משתמש, בקרה, לוגיקה ושרת—ובהתאם לכך יצרנו מערך מרחבי חדש שבו כל פעולה מוצאת את מקומה במערכת כוללת. החלוקה המרחבית מניחה את השרתים, פרוגרמות הקצה שלא מהוות ציר תנועה, על גבי מערכת לוגית שמקשרת בין כלל האלמנטים. בהקבלה אליה ישנה יחידת בקרה שמתווכת את הכניסות ומסדרת את המרחב כולו.
					</p>
			</div>
			<iframe id="main" src="index.html"></iframe>
			<script id="spesific-passive">
				function getDocumentScripture(iframe){
					try {
						let iframeDoc = iframe.contentWindow;
					} catch (error) {
						console.error(error);
						console.error(iframe);
						let iframeDoc = null;
					}
					return iframeDoc;
				}
				function getDocumentSelector(iframe){
					try {
						let iframeDoc = main_iframe.contentDocument || main_iframe.contentWindow.document;
					} catch (error) {
						console.error(error);
						console.error(iframe);
						let iframeDoc = null;
					}
					return iframeDoc;
				}
				function runPassive(){
					if (window.current_phase == 2){
						iframe = main_iframe.contentDocument || main_iframe.contentWindow.document;
						getDocumentSelector(main_iframe).getElementById("myVideo").play();
					}
				}
			</script>
			<script id="pop-navigators">
				function popNav(iframe){
					try{
						iframe = iframe.contentDocument || iframe.contentWindow.document;
						requestAnimationFrame(() => {
							const naver = iframe.getElementById('navContainer');
							if (naver) {naver.remove();}
						});
						
					} catch (error) {
						console.error(error);
						console.log(iframe);
					}
				}
				function popNavs(){
					let iframes = document.querySelectorAll("iframe");
					iframes.forEach(i => {popNav(i)});
				}
				popNavs();
			</script>
			<script id="main-motion">
				function stepShow(stepP){
					const parStepInd = parseInt(stepP.id.split("-")[1]);
					if (parStepInd <= window.current_phase){
						stepP.classList.toggle("hidden", false);
					}
					else{
						stepP.classList.toggle("hidden", true);
					}
				}
				var current_phase = 0;
				const main_iframe = document.getElementById("main");
				const main_texts = document.getElementById("main-texts");
				window.current_phase = current_phase;
				function update_phase(phs=-1){
					document.getElementById(("st-" + window.current_phase)).classList.toggle("chosen", false);
					
					if (phs == -1){current_phase += 1;}
					else {current_phase = phs;}
					current_phase %= 4;
					window.current_phase = current_phase;
					// texts beahavior
					document.getElementById(("st-" + current_phase)).classList.toggle("chosen", true);
					for (let i = 0; i < 4; i ++){
						let stepName = 'st-'+i;
						stepShow(document.getElementById(stepName));
					}
					main_texts.scrollTo({
						top: main_texts.scrollHeight,
						behavior: 'smooth'
					});
					
					main_iframe.src = phase_data[current_phase][0];
					runPassive();
					popNav(main_iframe);
				}
				
				function runWhileInactive(callback, intervalSeconds = 51) {
					let intervalId;
					let timeoutId;

					function startInterval() {
						// Start repeating the callback every N seconds
						intervalId = setInterval(callback, intervalSeconds * 1000);
					}

					function stopInterval() {
						clearInterval(intervalId);
						clearTimeout(timeoutId);
					}

					function reset() {
						stopInterval();
						// Restart the interval after inactivity
						timeoutId = setTimeout(startInterval, 1000); // short delay before restart
					}

					const events = ['mousemove', 'keydown', 'scroll', 'touchstart'];
					events.forEach(event => {
						document.addEventListener(event, reset, { passive: true });
					});

					startInterval();
				}
				update_phase(0);
				runWhileInactive(() => {
					update_phase();
				});
			</script>
		</div>
    </body>
</html>
